<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.14.xsd"
        objectQuotingStrategy="QUOTE_ONLY_RESERVED_WORDS">
    <changeSet id="1659184816341-1" author="Daniil Kulikov">
        <createSequence incrementBy="1" sequenceName="hibernate_sequence" startValue="1"/>
    </changeSet>
    <changeSet id="1659184816341-2" author="Daniil Kulikov">
        <createTable tableName="awards">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_awards"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
            <column name="description" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1659184816341-3" author="Daniil Kulikov">
        <createTable tableName="awards_ceremony">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_awardsceremony"/>
            </column>
            <column name="date_event" type="VARCHAR(255)"/>
            <column name="place_event" type="VARCHAR(255)"/>
            <column name="awards_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet id="1659184816341-4" author="Daniil Kulikov">
        <createTable tableName="awards_ceremony_result">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_awardsceremonyresult"/>
            </column>
            <column name="person_id" type="BIGINT"/>
            <column name="nomination_id" type="BIGINT"/>
            <column name="awards_ceremony_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet id="1659184816341-5" author="Daniil Kulikov">
        <createTable tableName="folders_movies">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_folders_movies"/>
            </column>
            <column name="category" type="VARCHAR(255)"/>
            <column name="user_id" type="BIGINT"/>
            <column name="privacy" type="VARCHAR(255)"/>
            <column name="name" type="VARCHAR(255)"/>
            <column name="description" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1659184816341-6" author="Daniil Kulikov">
        <createTable tableName="folders_persons">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_folders_persons"/>
            </column>
            <column name="favourites" type="BOOLEAN"/>
            <column name="user_id" type="INT"/>
            <column name="privacy" type="VARCHAR(255)"/>
            <column name="name" type="VARCHAR(255)"/>
            <column name="description" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1659184816341-7" author="Daniil Kulikov">
        <createTable tableName="movie_person">
            <column name="profession_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_movie_person"/>
            </column>
            <column name="person_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_movie_person"/>
            </column>
            <column name="type_character" type="VARCHAR(255)"/>
            <column name="name_role" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1659184816341-8" author="Daniil Kulikov">
        <createTable tableName="news">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_news"/>
            </column>
            <column name="rubric" type="VARCHAR(255)"/>
            <column name="date" type="DATETIME"/>
            <column name="title" type="VARCHAR(255)"/>
            <column name="html_body" type="VARCHAR(255)"/>
            <column name="user_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet id="1659184816341-9" author="Daniil Kulikov">
        <createTable tableName="nomination">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_nomination"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1659184816341-10" author="Daniil Kulikov">
        <createTable tableName="persons">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_persons"/>
            </column>
            <column name="first_name" type="VARCHAR(255)"/>
            <column name="last_name" type="VARCHAR(255)"/>
            <column name="height" type="DOUBLE"/>
            <column name="birthday" type="DATETIME"/>
            <column name="place_birthday" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1659184816341-11" author="Daniil Kulikov">
        <createTable tableName="persons_marriage">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_persons_marriage"/>
            </column>
            <column name="person_id" type="BIGINT"/>
            <column name="human_id" type="BIGINT"/>
            <column name="marriage_status" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1659184816341-12" author="Daniil Kulikov">
        <createTable tableName="professions">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_professions"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1659184816341-13" author="Daniil Kulikov">
        <createTable tableName="roles">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_roles"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1659184816341-14" author="Daniil Kulikov">
        <createTable tableName="user_avatar">
            <column name="user_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_useravatar"/>
            </column>
            <column name="avatar_url" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1659184816341-15" author="Daniil Kulikov">
        <createTable tableName="user_role">
            <column name="role_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_user_role"/>
            </column>
            <column name="user_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_user_role"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1659184816341-16" author="Daniil Kulikov">
        <createTable tableName="users">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_users"/>
            </column>
            <column name="email" type="VARCHAR(255)"/>
            <column name="first_name" type="VARCHAR(255)"/>
            <column name="last_name" type="VARCHAR(255)"/>
            <column name="password" type="VARCHAR(255)"/>
            <column name="birthday" type="DATE"/>
        </createTable>
    </changeSet>
    <changeSet id="1659184816341-17" author="Daniil Kulikov">
        <addUniqueConstraint columnNames="name" constraintName="uc_professions_name" tableName="professions"/>
    </changeSet>
    <changeSet id="1659184816341-18" author="Daniil Kulikov">
        <addUniqueConstraint columnNames="name" constraintName="uc_roles_name" tableName="roles"/>
    </changeSet>
    <changeSet id="1659184816341-19" author="Daniil Kulikov">
        <addForeignKeyConstraint baseColumnNames="awards_ceremony_id" baseTableName="awards_ceremony_result"
                                 constraintName="FK_AWARDSCEREMONYRESULT_ON_AWARDS_CEREMONY" referencedColumnNames="id"
                                 referencedTableName="awards_ceremony"/>
    </changeSet>
    <changeSet id="1659184816341-20" author="Daniil Kulikov">
        <addForeignKeyConstraint baseColumnNames="nomination_id" baseTableName="awards_ceremony_result"
                                 constraintName="FK_AWARDSCEREMONYRESULT_ON_NOMINATION" referencedColumnNames="id"
                                 referencedTableName="nomination"/>
    </changeSet>
    <changeSet id="1659184816341-21" author="Daniil Kulikov">
        <addForeignKeyConstraint baseColumnNames="person_id" baseTableName="awards_ceremony_result"
                                 constraintName="FK_AWARDSCEREMONYRESULT_ON_PERSON" referencedColumnNames="id"
                                 referencedTableName="persons"/>
    </changeSet>
    <changeSet id="1659184816341-22" author="Daniil Kulikov">
        <addForeignKeyConstraint baseColumnNames="awards_id" baseTableName="awards_ceremony"
                                 constraintName="FK_AWARDSCEREMONY_ON_AWARDS" referencedColumnNames="id"
                                 referencedTableName="awards"/>
    </changeSet>
    <changeSet id="1659184816341-23" author="Daniil Kulikov">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="folders_movies"
                                 constraintName="FK_FOLDERS_MOVIES_ON_USER" referencedColumnNames="id"
                                 referencedTableName="users"/>
    </changeSet>
    <changeSet id="1659184816341-24" author="Daniil Kulikov">
        <addForeignKeyConstraint baseColumnNames="person_id" baseTableName="movie_person"
                                 constraintName="FK_MOVIE_PERSON_ON_PERSON" referencedColumnNames="id"
                                 referencedTableName="persons"/>
    </changeSet>
    <changeSet id="1659184816341-25" author="Daniil Kulikov">
        <addForeignKeyConstraint baseColumnNames="profession_id" baseTableName="movie_person"
                                 constraintName="FK_MOVIE_PERSON_ON_PROFESSION" referencedColumnNames="id"
                                 referencedTableName="professions"/>
    </changeSet>
    <changeSet id="1659184816341-26" author="Daniil Kulikov">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="news" constraintName="FK_NEWS_ON_USER"
                                 referencedColumnNames="id" referencedTableName="users"/>
    </changeSet>
    <changeSet id="1659184816341-27" author="Daniil Kulikov">
        <addForeignKeyConstraint baseColumnNames="human_id" baseTableName="persons_marriage"
                                 constraintName="FK_PERSONS_MARRIAGE_ON_HUMAN" referencedColumnNames="id"
                                 referencedTableName="persons"/>
    </changeSet>
    <changeSet id="1659184816341-28" author="Daniil Kulikov">
        <addForeignKeyConstraint baseColumnNames="person_id" baseTableName="persons_marriage"
                                 constraintName="FK_PERSONS_MARRIAGE_ON_PERSON" referencedColumnNames="id"
                                 referencedTableName="persons"/>
    </changeSet>
    <changeSet id="1659184816341-29" author="Daniil Kulikov">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="user_avatar"
                                 constraintName="FK_USERAVATAR_ON_USER" referencedColumnNames="id"
                                 referencedTableName="users"/>
    </changeSet>
    <changeSet id="1659184816341-30" author="Daniil Kulikov">
        <addForeignKeyConstraint baseColumnNames="role_id" baseTableName="user_role"
                                 constraintName="fk_user_role_on_role" referencedColumnNames="id"
                                 referencedTableName="roles"/>
    </changeSet>
    <changeSet id="1659184816341-31" author="Daniil Kulikov">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="user_role"
                                 constraintName="fk_user_role_on_user" referencedColumnNames="id"
                                 referencedTableName="users"/>
    </changeSet>

</databaseChangeLog>